---
description: Require a complete multi-page website skeleton (layout, nav, auth, dashboard, admin, listings, details, search, legal, errors)
globs: ["build/**/web/src/**/*.php", "build/**/web/src/**/*.html", "build/**/web/src/**/*.js"]
alwaysApply: true
---

# Website Essentials — Multi‑Page Requirement

## Purpose
- Prevent labs from shipping with only 1–2 pages; require a realistic website surface.
- Standardize a minimal, complete set of pages/components for navigation, UX, and testing.

## Mandatory Structure (Minimum)
Create these files (or framework equivalents) under `build/<lab>/web/src`:

- Layout & Partials
  - `layout.php` (HTML head, Tailwind CDN, `<body class="min-h-screen bg-black text-white">`)
  - `partials/nav.php` (main navigation, links to primary pages)
  - `partials/footer.php`

- Core Pages
  - `index.php` (Home)
  - Auth pages are CONDITIONAL per lab (see "Auth Presence — Per‑Lab Dynamic")
    - If the vulnerability involves auth/session logic: include `login.php`, `register.php`, `logout.php`
    - If auth is in scope: include `dashboard.php` (post-login landing) and `profile.php` (basic user info)
    - If auth is NOT needed for the lab: omit all auth pages entirely

- Domain Pages
  - `items.php` (listing)
  - `item.php` (detail; accepts `id`)
  - `search.php` (query form + results)

- Support & Legal
  - `contact.php`
  - `about.php`
  - `privacy.php`, `terms.php`

- Admin (even if minimally implemented)
  - `admin/index.php`
  - `admin/users.php` (list)

- Health & Errors
  - `health.php` (no DB dependency; returns 200)
  - `errors/404.php`, `errors/500.php`

- SEO/Robots (static at web root if applicable)
  - `sitemap.xml`, `robots.txt`

## Routing Requirements
- `.htaccess` present with index fallback (see HTACCESS-ROUTING rule).
- All nav links resolve to real pages above.
- 404 routes render `errors/404.php`.

## UI Requirements
- Use Tailwind black theme baseline (see UI-BLACK and TAILWIND-DARK-MODE rules).
- Header includes brand/title; footer shows simple metadata.
- Pages share the layout and partials (no duplicated `<head>` fragments).
 - Home page must look realistic and clean (hero/intro + 1–2 content sections, no lorem-only stubs).

## Data/Behavior Guidelines
- Public pages: `index.php`, `about.php`, `contact.php`, `items.php`, `item.php`, `search.php`.
- Auth‑required: `dashboard.php`, `profile.php`, `admin/*`.
- Keep DB errors out of the UI; follow `PHP-MYSQLI-SAFE-RESULTS` for queries.
- Health endpoint must not use DB to avoid flapping.

### Auth Presence — Per‑Lab Dynamic
- Only include auth when the lab scenario/vulnerability requires it (e.g., auth bypass, weak login, session bugs).
- When auth is included, registration MUST be minimal and temporary:
  - Registration form accepts only `username` and `password` (no email or extra fields).
  - Credentials are stored locally for the lab only (e.g., flat file/JSON or in‑memory/session), sufficient for demo; no external services.
  - Keep the flow simple: register → login → access `dashboard.php` and `profile.php`.
- When auth is NOT needed (e.g., pure MySQL injection lab on public endpoints), omit `login.php`, `register.php`, `logout.php`, `dashboard.php`, and `profile.php`.

## Acceptance Criteria (Blocking)
- Navigation contains links to Home, Items, Search, About, Contact. If auth is included for the lab, show Login/Register (or Logout when authenticated) and Dashboard; if auth is not included, these links must be absent.
- Each linked page exists and returns 200 (or correct error page for bogus routes).
- Layout/partials are used across pages; Tailwind dark classes are applied by default.
- 404 routes to `errors/404.php`; 500 uses `errors/500.php` when triggered.
- `health.php` returns 200 quickly without DB.

## Notes
- Framework variants (router/controllers/templates) are acceptable if all routes/pages above exist and are reachable via navbar/footer.
- Keep content minimal but realistic. Admin pages may stub features but must render and link correctly.
 - Profile page is only required when auth is included by the lab design.

